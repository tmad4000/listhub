{% extends "base.html" %}
{% block title %}{% if item %}Edit — {{ item.title or item.slug }}{% else %}New Item{% endif %} — ListHub{% endblock %}
{% block content %}
<div style="margin-bottom: 16px;">
    <a href="{{ url_for('views.dashboard') }}">&larr; Back to dashboard</a>
</div>

<h1 style="margin-bottom: 24px;">{% if item %}Edit Item{% else %}New Item{% endif %}</h1>

<form method="post">
    <div class="form-row">
        <div class="form-group">
            <label for="title">Title</label>
            <input type="text" id="title" name="title" value="{{ item.title if item else '' }}" placeholder="My Reading List">
        </div>
        <div class="form-group">
            <label for="slug">Slug</label>
            <input type="text" id="slug" name="slug" value="{{ item.slug if item else '' }}" placeholder="my-reading-list">
            <div class="form-help">URL path: /@{{ current_user.username }}/<em>slug</em></div>
        </div>
    </div>

    <div class="form-group">
        <label for="content">Content <span style="color: var(--text-muted);">(Markdown)</span></label>
        <textarea id="content" name="content" placeholder="# My List&#10;&#10;- Item one&#10;- Item two">{{ item.content if item else '' }}</textarea>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="item_type">Type</label>
            <select id="item_type" name="item_type">
                <option value="note" {% if item and item.item_type == 'note' %}selected{% endif %}>Note</option>
                <option value="list" {% if item and item.item_type == 'list' %}selected{% endif %}>List</option>
                <option value="document" {% if item and item.item_type == 'document' %}selected{% endif %}>Document</option>
            </select>
        </div>
        <div class="form-group">
            <label for="visibility">Visibility</label>
            <select id="visibility" name="visibility">
                <option value="private" {% if item and item.visibility == 'private' %}selected{% endif %}>Private</option>
                <option value="shared" {% if item and item.visibility == 'shared' %}selected{% endif %}>Shared</option>
                <option value="public" {% if item and item.visibility == 'public' %}selected{% endif %}>Public</option>
            </select>
        </div>
        <div class="form-group">
            <label for="tags">Tags</label>
            <input type="text" id="tags" name="tags" value="{{ tags_str if tags_str is defined else '' }}" placeholder="reading, books, 2026">
            <div class="form-help">Comma-separated</div>
        </div>
    </div>

    <div style="display: flex; gap: 12px; margin-top: 8px;">
        <button type="submit" class="btn btn-primary">{% if item %}Save Changes{% else %}Create Item{% endif %}</button>
        <a href="{{ url_for('views.dashboard') }}" class="btn">Cancel</a>
    </div>
</form>
{% endblock %}
